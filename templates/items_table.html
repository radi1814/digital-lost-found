<!-- items_table.html -->
<div class="table-responsive">
    <table class="table table-striped table-bordered align-middle">
        <thead class="table-dark">
            <tr>
                <th>Photo</th>
                <th>Title</th>
                <th>Status</th>
                <th>Category</th>
                <th>Location</th>
                <th>Reported By</th>
                <th>Reported At</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for item in items_to_show %}
            <tr>
                <td>
                    {% if item.photo %}
                    <img src="{{ url_for('static', filename='uploads/' + item.photo) }}" alt="Item photo"
                        style="width: 80px; height: 80px; object-fit: cover; border-radius: 5px;">
                    {% else %}
                    <div class="text-center text-muted"
                        style="width: 80px; height: 80px; line-height: 80px; border: 1px solid #ddd; border-radius: 5px; font-size: 12px;">
                        No Image
                    </div>
                    {% endif %}
                </td>
                <td>{{ item.title }}</td>
                <td>
                    {% if item.status == 'Lost' %}
                    <span class="badge bg-danger">{{ item.status }}</span>
                    {% else %}
                    <span class="badge bg-success">{{ item.status }}</span>
                    {% endif %}
                </td>
                <td>{{ item.category }}</td>
                <td>{{ item.location }}</td>
                <td>{{ item.user.username if item.user else 'Anonymous' }}</td>
                <td>{{ item.created_at.strftime('%d %b %Y, %H:%M') if item.created_at else '-' }}</td>

                <!-- Actions -->
                <td>
                    <div class="d-flex gap-2">
                        <!-- View -->
                        <a href="{{ url_for('item_details', item_id=item.id) }}" class="btn btn-sm btn-info">View</a>

                        <!-- Edit -->
                        {% if current_user.is_authenticated and item.user_id == current_user.id %}
                        <a href="{{ url_for('edit_item', item_id=item.id) }}" class="btn btn-sm btn-warning">Edit</a>

                        <!-- Delete -->
                        <form action="{{ url_for('delete_item', item_id=item.id) }}" method="POST"
                            onsubmit="return confirm('Are you sure you want to delete this item?');">
                            <button type="submit" class="btn btn-sm btn-danger">Delete</button>
                        </form>
                        {% endif %}
                    </div>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="8" class="text-center">No items reported yet.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>